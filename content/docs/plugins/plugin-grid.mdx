---
title: "Plugin Grid"
---

import { InteractiveDemo } from '@/app/components/InteractiveDemo';
import { PluginLoader } from '@/app/components/PluginLoader';

Advanced data grid with sorting, filtering, pagination, and row selection capabilities.

## Installation

```bash
npm install @object-ui/plugin-grid
```

<PluginLoader plugins={['grid']}>

## Interactive Examples

{/* Temporarily disabled due to data-table component bug */}
{/* <InteractiveDemo
  schema={{
    type: "object-grid",
    columns: [
      { header: "ID", accessorKey: "id", width: 80 },
      { header: "Name", accessorKey: "name" },
      { header: "Email", accessorKey: "email" },
      { header: "Role", accessorKey: "role" },
      { header: "Status", accessorKey: "status" }
    ],
    data: [
      { id: 1, name: "John Doe", email: "john@example.com", role: "Admin", status: "Active" },
      { id: 2, name: "Jane Smith", email: "jane@example.com", role: "User", status: "Active" },
      { id: 3, name: "Bob Johnson", email: "bob@example.com", role: "User", status: "Inactive" }
    ],
    sortable: true,
    filterable: false,
    pagination: false
  }}
  title="Basic Data Grid"
  description="Grid with sorting, filtering, and pagination"
/> */}

:::note
Interactive demo temporarily disabled due to a known issue with the data-table component. See the code examples below for usage.
:::

## Features

- **Sorting** - Multi-column sorting support
- **Filtering** - Column-level filtering
- **Pagination** - Built-in pagination controls
- **Row Selection** - Single and multi-row selection
- **Custom Cells** - Custom cell renderers
- **Responsive** - Mobile-friendly layouts

## Schema API

### Grid

```plaintext
{
  type: 'grid',
  columns: GridColumn[],
  data?: any[],
  sortable?: boolean,
  filterable?: boolean,
  pagination?: boolean | PaginationConfig,
  selectable?: boolean,
  onRowClick?: (row) => void,
  className?: string
}
```

### Column Definition

```plaintext
interface GridColumn {
  header: string;
  accessorKey: string;
  sortable?: boolean;
  filterable?: boolean;
  width?: number | string;
  align?: 'left' | 'center' | 'right';
  cell?: (value, row) => ReactNode;
}
```

## Usage

### Auto-registration (Side-effect Import)

```plaintext
import '@object-ui/plugin-grid';
```

### Manual Registration

```plaintext
import { gridComponents } from '@object-ui/plugin-grid';
import { ComponentRegistry } from '@object-ui/core';

Object.entries(gridComponents).forEach(([type, component]) => {
  ComponentRegistry.register(type, component);
});
```

## Examples

### Grid with Custom Cells

```json
{
  "type": "grid",
  "columns": [
    { "header": "Name", "accessorKey": "name" },
    { 
      "header": "Status", 
      "accessorKey": "status",
      "cell": {
        "type": "badge",
        "label": "${value}",
        "variant": "${value === 'Active' ? 'success' : 'default'}"
      }
    },
    {
      "header": "Actions",
      "accessorKey": "id",
      "cell": {
        "type": "button-group",
        "buttons": [
          { "label": "Edit" },
          { "label": "Delete", "variant": "destructive" }
        ]
      }
    }
  ]
}
```

### Selectable Grid

```json
{
  "type": "grid",
  "columns": [...],
  "data": [...],
  "selectable": true,
  "onSelectionChange": "handleSelection"
}
```

### Grid with Pagination

```json
{
  "type": "grid",
  "columns": [...],
  "data": [...],
  "pagination": {
    "pageSize": 10,
    "showSizeChanger": true,
    "pageSizeOptions": [10, 20, 50, 100]
  }
}
```

### ObjectQL Integration

```json
{
  "type": "object-grid",
  "object": "users",
  "columns": [
    { "header": "Name", "accessorKey": "name" },
    { "header": "Email", "accessorKey": "email" },
    { "header": "Created", "accessorKey": "created_at" }
  ],
  "pagination": true,
  "sortable": true,
  "filterable": true
}
```

## Features

### Sorting

Enable sorting on all or specific columns:

```json
{
  "type": "grid",
  "sortable": true,
  "columns": [
    { "header": "Name", "accessorKey": "name", "sortable": true },
    { "header": "Email", "accessorKey": "email", "sortable": false }
  ]
}
```

### Filtering

Enable column-level filtering:

```json
{
  "type": "grid",
  "filterable": true,
  "columns": [
    { "header": "Status", "accessorKey": "status", "filterable": true }
  ]
}
```

### Row Actions

Add action buttons to each row:

```json
{
  "type": "grid",
  "rowActions": [
    { "label": "View", "onClick": "viewRow" },
    { "label": "Edit", "onClick": "editRow" },
    { "label": "Delete", "onClick": "deleteRow" }
  ]
}
```

### Inline Editing

Enable inline cell editing for quick data updates:

```json
{
  "type": "object-grid",
  "objectName": "users",
  "columns": [
    { "header": "ID", "accessorKey": "id", "editable": false },
    { "header": "Name", "accessorKey": "name" },
    { "header": "Email", "accessorKey": "email" },
    { "header": "Status", "accessorKey": "status" }
  ],
  "editable": true,
  "onCellChange": "handleCellChange"
}
```

**Features:**
- Double-click or press Enter on a cell to start editing
- Press Enter to save changes
- Press Escape to cancel editing
- Column-level control: Set `editable: false` on specific columns to prevent editing
- Callback support: Use `onCellChange` to handle cell value updates

**Example Handler:**
```javascript
function handleCellChange(rowIndex, columnKey, newValue, row) {
  console.log(`Cell at row ${rowIndex}, column ${columnKey} changed to:`, newValue);
  console.log('Full row data:', row);
  // Update your data source here
}
```

### Batch Editing & Multi-Row Save

Edit multiple cells across multiple rows and save them individually or all at once:

```json
{
  "type": "object-grid",
  "objectName": "products",
  "columns": [
    { "header": "SKU", "accessorKey": "sku", "editable": false },
    { "header": "Name", "accessorKey": "name" },
    { "header": "Price", "accessorKey": "price" }
  ],
  "editable": true,
  "rowActions": true,
  "onRowSave": "handleRowSave",
  "onBatchSave": "handleBatchSave"
}
```

**Features:**
- **Pending changes tracking**: Edit multiple cells across rows before saving
- **Visual indicators**: Modified rows highlighted in amber, modified cells in bold
- **Row-level save/cancel**: Individual row save and cancel buttons
- **Batch operations**: Save All and Cancel All buttons for bulk actions
- **Flexible callbacks**: `onRowSave` for single row, `onBatchSave` for multiple rows

**Example Handlers:**
```javascript
function handleRowSave(rowIndex, changes, row) {
  console.log('Saving row:', rowIndex, changes);
  // Save single row to backend
  await dataSource.update(row.id, changes);
}

function handleBatchSave(allChanges) {
  console.log('Batch saving:', allChanges.length, 'rows');
  // Save all changes at once
  await Promise.all(
    allChanges.map(({ row, changes }) => 
      dataSource.update(row.id, changes)
    )
  );
}
```

## TypeScript Support

```plaintext
import type { GridSchema, GridColumn } from '@object-ui/plugin-grid';

const grid: GridSchema = {
  type: 'grid',
  columns: [...],
  data: [],
  sortable: true,
  pagination: true
};
```

## License

MIT

</PluginLoader>
