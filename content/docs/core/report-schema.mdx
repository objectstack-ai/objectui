---
title: "Report Schema (ReportSchema)"
description: "Enterprise reports with aggregation, export, and scheduling"
---

# Report Schema

The `ReportSchema` enables creating comprehensive data reports with field aggregation, multiple export formats, and automated scheduling.

## Overview

ReportSchema provides:
- **Field aggregation** - Sum, average, count, min, max, distinct
- **Export formats** - PDF, Excel, CSV, JSON, HTML
- **Scheduled reports** - Daily, weekly, monthly, quarterly, yearly
- **Email distribution** - Automatic report delivery
- **Interactive builder** - Report configuration UI
- **Data filtering** - Complex filter criteria

## Basic Usage

```typescript
import type { ReportSchema } from '@object-ui/types';

const salesReport: ReportSchema = {
  type: 'report',
  title: 'Monthly Sales Report',
  description: 'Sales performance analysis',
  
  fields: [
    {
      name: 'total_sales',
      label: 'Total Sales',
      type: 'number',
      aggregation: 'sum',
      format: 'currency'
    },
    {
      name: 'order_count',
      label: 'Orders',
      type: 'number',
      aggregation: 'count'
    }
  ],
  
  filters: [
    {
      field: 'date',
      operator: 'between',
      values: ['2024-01-01', '2024-01-31']
    }
  ],
  
  showExportButtons: true
};
```

## Properties

### Basic Configuration

| Property | Type | Description |
|----------|------|-------------|
| `type` | `'report'` | Component type identifier (required) |
| `title` | `string` | Report title |
| `description` | `string` | Report description |
| `dataSource` | `DataSource` | Data source configuration |

### Report Fields

```typescript
interface ReportField {
  name: string;                    // Field name
  label?: string;                  // Display label
  type?: 'string' | 'number' | 'date' | 'boolean';
  aggregation?: 'sum' | 'avg' | 'min' | 'max' | 'count' | 'distinct';
  format?: string;                 // Display format
  showInSummary?: boolean;         // Show in summary section
  sortOrder?: number;              // Sort order
}
```

### Aggregation Types

- **`sum`** - Total of all values
- **`avg`** - Average value
- **`min`** - Minimum value
- **`max`** - Maximum value
- **`count`** - Count of records
- **`distinct`** - Count of unique values

### Filters

```typescript
interface ReportFilter {
  field: string;
  operator: 'equals' | 'not_equals' | 'contains' | 'greater_than' | 
            'less_than' | 'between' | 'in' | 'not_in';
  value?: any;
  values?: any[];  // For 'between' and 'in' operators
}
```

### Group By

```typescript
interface ReportGroupBy {
  field: string;
  label?: string;
  sort?: 'asc' | 'desc';
}
```

## Report Sections

Define report structure with sections:

```typescript
interface ReportSection {
  type: 'header' | 'summary' | 'chart' | 'table' | 'text' | 'page-break';
  title?: string;
  content?: SchemaNode | SchemaNode[];
  chart?: ChartSchema;        // For type='chart'
  columns?: ReportField[];    // For type='table'
  text?: string;              // For type='text'
  visible?: boolean | string; // Visibility condition
}
```

## Export Configuration

```typescript
interface ReportExportConfig {
  format: 'pdf' | 'excel' | 'csv' | 'json' | 'html';
  filename?: string;
  includeHeaders?: boolean;
  orientation?: 'portrait' | 'landscape';  // PDF only
  pageSize?: 'A4' | 'A3' | 'Letter' | 'Legal';  // PDF only
  options?: Record<string, any>;
}
```

## Scheduling

```typescript
interface ReportSchedule {
  enabled?: boolean;
  frequency?: 'once' | 'daily' | 'weekly' | 'monthly' | 'quarterly' | 'yearly';
  dayOfWeek?: number;          // For weekly (0-6)
  dayOfMonth?: number;         // For monthly (1-31)
  time?: string;               // HH:mm format
  timezone?: string;
  recipients?: string[];       // Email addresses
  subject?: string;
  body?: string;
  formats?: ReportExportFormat[];  // Formats to attach
}
```

## Complete Example

```typescript
const comprehensiveReport: ReportSchema = {
  type: 'report',
  title: 'Quarterly Sales Analysis',
  description: 'Comprehensive sales performance analysis by region and product',
  
  // Data source
  dataSource: {
    provider: 'api',
    read: {
      url: '/api/sales',
      method: 'GET'
    }
  },
  
  // Report fields
  fields: [
    {
      name: 'region',
      label: 'Region',
      type: 'string'
    },
    {
      name: 'product',
      label: 'Product',
      type: 'string'
    },
    {
      name: 'revenue',
      label: 'Revenue',
      type: 'number',
      aggregation: 'sum',
      format: 'currency',
      showInSummary: true
    },
    {
      name: 'units_sold',
      label: 'Units Sold',
      type: 'number',
      aggregation: 'sum',
      showInSummary: true
    },
    {
      name: 'avg_price',
      label: 'Average Price',
      type: 'number',
      aggregation: 'avg',
      format: 'currency'
    }
  ],
  
  // Filters
  filters: [
    {
      field: 'date',
      operator: 'between',
      values: ['2024-01-01', '2024-03-31']
    },
    {
      field: 'status',
      operator: 'equals',
      value: 'completed'
    }
  ],
  
  // Grouping
  groupBy: [
    {
      field: 'region',
      label: 'Region',
      sort: 'asc'
    },
    {
      field: 'product',
      label: 'Product',
      sort: 'desc'
    }
  ],
  
  // Report sections
  sections: [
    {
      type: 'header',
      title: 'Executive Summary'
    },
    {
      type: 'summary',
      title: 'Key Metrics'
    },
    {
      type: 'chart',
      title: 'Revenue Trend',
      chart: {
        type: 'chart',
        chartType: 'line',
        data: [],
        series: [
          {
            name: 'Revenue',
            type: 'line',
            dataKey: 'revenue'
          }
        ]
      }
    },
    {
      type: 'table',
      title: 'Detailed Breakdown',
      columns: [
        { name: 'region', label: 'Region' },
        { name: 'product', label: 'Product' },
        { name: 'revenue', label: 'Revenue', aggregation: 'sum' },
        { name: 'units_sold', label: 'Units', aggregation: 'sum' }
      ]
    },
    {
      type: 'page-break'
    },
    {
      type: 'text',
      text: 'Report generated on ${new Date().toLocaleDateString()}'
    }
  ],
  
  // Schedule configuration
  schedule: {
    enabled: true,
    frequency: 'monthly',
    dayOfMonth: 1,
    time: '09:00',
    timezone: 'America/New_York',
    recipients: [
      'sales-team@company.com',
      'management@company.com'
    ],
    subject: 'Monthly Sales Report - ${date}',
    body: 'Please find attached the monthly sales report.',
    formats: ['pdf', 'excel']
  },
  
  // Export configuration
  defaultExportFormat: 'pdf',
  exportConfigs: {
    pdf: {
      format: 'pdf',
      filename: 'sales-report-${date}.pdf',
      orientation: 'landscape',
      pageSize: 'A4',
      includeHeaders: true
    },
    excel: {
      format: 'excel',
      filename: 'sales-report-${date}.xlsx',
      includeHeaders: true
    },
    csv: {
      format: 'csv',
      filename: 'sales-data-${date}.csv',
      includeHeaders: true
    }
  },
  
  // UI options
  showExportButtons: true,
  showPrintButton: true,
  showScheduleButton: true,
  refreshInterval: 300  // Auto-refresh every 5 minutes
};
```

## Report Builder

Use `ReportBuilderSchema` for interactive report creation:

```typescript
import type { ReportBuilderSchema } from '@object-ui/types';

const builder: ReportBuilderSchema = {
  type: 'report-builder',
  
  report: {
    // Initial report configuration
  },
  
  dataSources: [
    { provider: 'api', read: { url: '/api/sales' } },
    { provider: 'api', read: { url: '/api/customers' } }
  ],
  
  availableFields: [
    { name: 'revenue', label: 'Revenue', type: 'number' },
    { name: 'units', label: 'Units Sold', type: 'number' }
  ],
  
  showPreview: true,
  onSave: 'handleSaveReport',
  onCancel: 'handleCancel'
};
```

## Report Viewer

Use `ReportViewerSchema` to display generated reports:

```typescript
import type { ReportViewerSchema } from '@object-ui/types';

const viewer: ReportViewerSchema = {
  type: 'report-viewer',
  report: salesReport,
  data: reportData,
  showToolbar: true,
  allowExport: true,
  allowPrint: true,
  loading: false
};
```

## Runtime Validation

```typescript
import { ReportSchema } from '@object-ui/types/zod';

const result = ReportSchema.safeParse(myReport);

if (result.success) {
  console.log('Valid report configuration');
} else {
  console.error('Validation errors:', result.error);
}
```

## Use Cases

ReportSchema is perfect for:

- **Analytics dashboards** - Display key business metrics and KPIs
- **Business intelligence** - Generate insights from operational data
- **Automated reporting** - Schedule regular reports for stakeholders
- **Data exports** - Provide data in multiple formats (PDF, Excel, CSV)
- **Compliance reporting** - Generate audit trails and regulatory reports
- **Executive summaries** - Create high-level overviews for management

## Best Practices

1. **Use meaningful aggregations** - Choose aggregation types that make sense for the data
2. **Limit field count** - Too many fields make reports hard to read
3. **Group logically** - Group by dimensions that provide insights
4. **Test exports** - Verify all export formats render correctly
5. **Set reasonable schedules** - Don't over-email recipients
6. **Include filters** - Allow users to customize date ranges
7. **Add summary sections** - Provide key metrics at the top

## Related

- [Chart Components](/docs/components/data-display/chart) - Data visualization
- [Data Table](/docs/components/complex/data-table) - Tabular data display
- [Data Source](/docs/guide/data-source) - Data integration
